---
title: 分值计算需求
date: '2025-04-29 15:18:25'
meta: []
permalink: /post/score-calculation-requirements-z1tooq8.html
author:
  name: xiaoqin
  link: https://github.com/wine-wind
---


<!-- more -->




# 分值计算需求

pad端提交时，需要将分值计算后提交（半对的分值）

多选题：

	长度不一致要区分两种情况：1.用户选择答案超出正确答案数量，为错；2.少于正确答案数量，则判断正确答案是否包含用户答案，如果包含则为半对

‍

```js
initImg() {
      this.loadImageUrl = this.imageUrl.replace('https://', 'http://');
      let path = this.loadImageUrl;
      if (path.startsWith('http')) {
        path += `?t=${new Date().getTime()}`
      }
      // 创建 img 元素
      const image = new Image();
      this.originalImage = image;  // 保存原始图片对象
      image.crossOrigin = "anonymous";  // 添加跨域声明
      image.src = path;

      const canvas = this.$refs.canvas;
      const dpr = window.devicePixelRatio || 1;  // 获取设备像素比

      image.onload = function () {
        // 获取原始图片宽高比
        let scale = image.naturalWidth / image.naturalHeight / 10;
        const img_width = image.naturalWidth * scale;
        const img_height = image.naturalHeight * scale;

        this.imgState = 2;
        let width = img_width;
        let height = img_height;

        canvas.width = width * dpr;
        canvas.height = height * dpr;
        this.init_offset = {
          top: canvas.offsetTop,
          left: canvas.offsetLeft,
        }
        this.init_center = {
          x: canvas.width/2,
          y: canvas.height/2,
        }
        let el = this.$refs.copy;
        el.style.width = `${width}px`;
        el.style.height = `${height}px`;

        canvas.style.width = `${width}px`;
        canvas.style.height = `${height}px`;
        const ctx = canvas.getContext('2d');
        ctx.scale(dpr, dpr);  // 缩放画布上下文
        ctx.drawImage(image, 0, 0, width, height);
        this.drawHistory.push(ctx.getImageData(0, 0, canvas.width, canvas.height));
      }.bind(this);

      image.onerror = function () {
        this.imgState = 3;
        console.error('图片加载失败');
      }.bind(this);

      this.initCanvas();

      this.mobileScale = 1
      this.imgScale = 1
      this.imgRotate = 0
      this.imgTop = 0
      this.imgLeft = 0
    },
```

‍

‍

1. pad端学情分析-知识点详情页面的图表增加半对，需要接口返回，字段参考之前的返回结构和名称
2. web端学情分析-知识点详情页面的表格增加半对数据，需要接口返回  教师账号：13949028909
3. 填空题设置总分时，需要将分平均一下，如果设置的是每个空的分，则fill是每个空的分，如果没有设置分，则fill为每个空的对错

‍

‍

https://teaapitest.5gzhike.com/tea/test/v2/handout/result/stu/?tea_handout_id=69896&class_id=13601&sessionid=5ayyjujga30f80drdujd58jdiy8cn7z2&u=22242&device=66666&login_client=6&school_id=18&from_xf=0&uuid=e19a51d6-bc4c-4134-a0d3-4bbd5e454c4c

https://teaapitest.5gzhike.com/tea/test/teaching/object/result/?object_id=20555&object_type=5&class_id=13601&sessionid=5ayyjujga30f80drdujd58jdiy8cn7z2&u=22242&device=66666&login_client=6&school_id=18&from_xf=0&uuid=e19a51d6-bc4c-4134-a0d3-4bbd5e454c4

‍

https://teaapitest.5gzhike.com/tea/test/teaching/object/question/list/?object_id=44474&object_type=1&class_id=13601&sessionid=f8hyqivyex4qh20d9jm9zb6h0g2cxmrp&u=22242&device=66666&login_client=6&school_id=18&from_xf=0&uuid=3b75b6c3-1b03-4fad-9bcb-80025743021d

https://teaapitest.5gzhike.com/tea/test/teaching/object/knowledge/detail/?object_id=44474&object_type=1&class_id=13601&sessionid=f8hyqivyex4qh20d9jm9zb6h0g2cxmrp&u=22242&device=66666&login_client=6&school_id=18&from_xf=0&uuid=3b75b6c3-1b03-4fad-9bcb-80025743021d

https://teaapitest.5gzhike.com/tea/test/teaching/object/question/list/?object_id=32067&object_type=2&class_id=13601&sessionid=f8hyqivyex4qh20d9jm9zb6h0g2cxmrp&u=22242&device=66666&login_client=6&school_id=18&from_xf=0&uuid=3b75b6c3-1b03-4fad-9bcb-80025743021d

‍

https://teaapitest.5gzhike.com/tea/test/teaching/object/knowledge/detail/?object_id=32067&object_type=2&class_id=13601&sessionid=f8hyqivyex4qh20d9jm9zb6h0g2cxmrp&u=22242&device=66666&login_client=6&school_id=18&from_xf=0&uuid=3b75b6c3-1b03-4fad-9bcb-80025743021d

‍

1.预览图片的标题不展示，如果有多张图片则会展示为（x/X);

2.考试在解析页面和试题解析页面图片预览有不同，因为页面结构影响

‍
